<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Snus Slots</title>

<style>
body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: radial-gradient(circle at top, #2c5364, #0f2027 55%, #000 100%);
    color: #f5f5f5;
    margin: 0;
    min-height: 100vh;
    text-align: center;
}

/* GLASS CONTAINER */
.container {
    width: 360px;
    margin: 120px auto;
    background: rgba(20,20,20,0.65);
    backdrop-filter: blur(16px);
    padding: 32px;
    border-radius: 24px;
    border: 1px solid rgba(255,215,0,0.25);
    box-shadow:
        0 0 40px rgba(255,215,0,0.15),
        0 30px 80px rgba(0,0,0,0.9);
}

input {
    width: 90%;
    padding: 14px;
    margin: 12px 0;
    border-radius: 14px;
    border: none;
    font-size: 15px;
}

button {
    padding: 12px 28px;
    background: linear-gradient(135deg, #ffd700, #ff9f00);
    border: none;
    border-radius: 30px;
    cursor: pointer;
    font-weight: 800;
    margin: 6px;
    box-shadow: 0 6px 20px rgba(255,165,0,0.6);
    transition: 0.25s;
}

button:hover {
    transform: translateY(-4px) scale(1.05);
}

.topbar {
    background: linear-gradient(90deg, #000, #111);
    padding: 18px 24px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.hidden { display: none; }

.game-box {
    background: linear-gradient(160deg, #1f1f1f, #0d0d0d);
    padding: 26px;
    margin: 22px auto;
    width: 320px;
    border-radius: 24px;
    cursor: pointer;
    font-size: 22px;
    border: 1px solid rgba(255,215,0,0.2);
}

.cards { margin: 18px; }

.card {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin: 10px;
    min-width: 64px;
    min-height: 96px;
    background: white;
    color: black;
    border-radius: 18px;
    font-size: 22px;
    font-weight: bold;
}

/* ğŸ¡ ROULETTE */
.roulette-wrapper {
    display: flex;
    justify-content: center;
    margin: 30px 0;
}

.roulette-wheel {
    position: relative;
    width: 260px;
    height: 260px;
    border-radius: 50%;
	
	position: relative;
	overflow: hidden;

    background:
        conic-gradient(
            red 0deg 9.7deg,
            black 9.7deg 19.4deg,
            red 19.4deg 29.1deg,
            black 29.1deg 38.8deg,
            red 38.8deg 48.5deg,
            black 48.5deg 58.2deg,
            red 58.2deg 67.9deg,
            black 67.9deg 77.6deg,
            red 77.6deg 87.3deg,
            black 87.3deg 97deg,
            green 97deg 106.7deg,
            red 106.7deg 116.4deg,
            black 116.4deg 126.1deg,
            red 126.1deg 135.8deg,
            black 135.8deg 145.5deg,
            red 145.5deg 155.2deg,
            black 155.2deg 164.9deg,
            red 164.9deg 174.6deg,
            black 174.6deg 184.3deg,
            red 184.3deg 194deg,
            black 194deg 203.7deg,
            red 203.7deg 213.4deg,
            black 213.4deg 223.1deg,
            red 223.1deg 232.8deg,
            black 232.8deg 242.5deg,
            red 242.5deg 252.2deg,
            black 252.2deg 261.9deg,
            red 261.9deg 271.6deg,
            black 271.6deg 281.3deg,
            red 281.3deg 291deg,
            black 291deg 300.7deg,
            red 300.7deg 310.4deg,
            black 310.4deg 320.1deg,
            red 320.1deg 329.8deg,
            black 329.8deg 339.5deg,
            red 339.5deg 360deg
        );
		
    border: 6px solid #d4af37;
    box-shadow:
        0 0 40px rgba(255,215,0,0.4),
        inset 0 0 20px rgba(0,0,0,0.7);
}

.ball {
    position: absolute;
    width: 14px;
    height: 14px;
    background: white;
    border-radius: 50%;

    /* ğŸ¯ WICHTIG */
    top: 50%;
    left: 50%;
    transform: rotate(0deg) translateX(115px);

    box-shadow: 0 0 10px rgba(255,255,255,0.9);
}


.rolling {
    animation: rollBall 2.5s cubic-bezier(.2,.8,.3,1) forwards;
}

@keyframes rollBall {
    from {
        transform: rotate(0deg) translateX(115px);
    }
    to {
        transform: rotate(var(--ball-rotation)) translateX(115px);
    }
}




</style>
</head>

<body>

<!-- LOGIN -->
<div class="container" id="loginBox">
    <h2>ğŸ° Snus Slots Login</h2>
    <input id="username" placeholder="Benutzername">
    <input id="password" type="password" placeholder="Passwort">
    <button onclick="login()">Anmelden</button>
    <p id="msg"></p>
</div>

<!-- CASINO -->
<div id="casinoPage" class="hidden">
<div class="topbar">
    <div>ğŸ‘¤ <span id="userText"></span> | ğŸ’° <span id="balanceText"></span> Chips</div>
    <button onclick="logout()">Abmelden</button>
</div>

<div id="gameMenu">
    <h1>ğŸ® Casino Lobby</h1>
    <button onclick="dailyBonus()">ğŸ Tagesbonus</button>
    <p id="bonusMsg"></p>

    <div class="game-box" onclick="openBlackjack()">ğŸƒ Blackjack</div>
    <div class="game-box" onclick="openRoulette()">ğŸ¡ Roulette</div>
</div>

<!-- BLACKJACK -->
<div id="blackjack" class="hidden">
    <h1>ğŸƒ Blackjack</h1>

    <button onclick="setBet(50)">50</button>
    <button onclick="setBet(100)">100</button>
    <button onclick="setBet(200)">200</button>
	<button onclick="setBet(500)">500</button>
	<button onclick="setBet(1000)">1000</button>
	<button onclick="allIn()">ğŸ’€ ALL IN</button>
	<p>Einsatz: <span id="betText">0</span></p>

    <h3>Dealer</h3>
    <div class="cards" id="dealerCards"></div>
    <p><span id="dealerSum"></span></p>

    <h3>Du</h3>
    <div class="cards" id="playerCards"></div>
    <p><span id="playerSum"></span></p>

    <button onclick="hit()">Karte ziehen</button>
    <button onclick="stand()">Stand</button>
    <button onclick="newGame()">Erneut</button>
    <button onclick="backToMenu()">ZurÃ¼ck</button>

    <p id="result"></p>
</div>

<!-- ROULETTE -->
<div id="roulette" class="hidden">
    <h1>ğŸ¡ Roulette</h1>

	<div class="roulette-wrapper">
		<div class="roulette-wheel" id="rouletteWheel">
			<div class="ball" id="rouletteBall"></div>
		</div>
	</div>


    <button onclick="setRouletteBet(50)">50</button>
    <button onclick="setRouletteBet(100)">100</button>
    <p>Einsatz: <span id="rouletteBet">0</span></p>

    <button onclick="betColor('red')">ğŸ”´ Rot</button>
    <button onclick="betColor('black')">âš« Schwarz</button>

    <br><br>
    <button onclick="spin()">Drehen</button>
    <button onclick="backToMenu()">ZurÃ¼ck</button>

    <p id="rouletteResult"></p>
</div>

</div>

<script>
/* ğŸ”Š SOUNDS */
const sounds={
 click:new Audio("https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"),
 card:new Audio("https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3"),
 win:new Audio("https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"),
 lose:new Audio("https://assets.mixkit.co/active_storage/sfx/2042/2042-preview.mp3"),
 bonus:new Audio("https://assets.mixkit.co/active_storage/sfx/2037/2037-preview.mp3")
};
const play=s=>{sounds[s].currentTime=0;sounds[s].play();};

/* GLOBAL */
/* GLOBAL */
let balance=1000, bet=0, player=[], dealer=[], gameOver=false;
let rouletteBet=0, rouletteChoice=null;

const rouletteNumbers = [
  {n:0, color:"green"},
  {n:1, color:"red"},   {n:2, color:"black"},
  {n:3, color:"red"},   {n:4, color:"black"},
  {n:5, color:"red"},   {n:6, color:"black"},
  {n:7, color:"red"},   {n:8, color:"black"},
  {n:9, color:"red"},   {n:10, color:"black"},
  {n:11, color:"black"},{n:12, color:"red"},
  {n:13, color:"black"},{n:14, color:"red"},
  {n:15, color:"black"},{n:16, color:"red"},
  {n:17, color:"black"},{n:18, color:"red"},
  {n:19, color:"red"},  {n:20, color:"black"},
  {n:21, color:"red"},  {n:22, color:"black"},
  {n:23, color:"red"},  {n:24, color:"black"},
  {n:25, color:"red"},  {n:26, color:"black"},
  {n:27, color:"red"},  {n:28, color:"black"},
  {n:29, color:"black"},{n:30, color:"red"},
  {n:31, color:"black"},{n:32, color:"red"},
  {n:33, color:"black"},{n:34, color:"red"},
  {n:35, color:"black"},{n:36, color:"red"}
];

const suits=["â™ ","â™¥","â™¦","â™£"],
      values=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];


/* LOGIN */
function login(){
    play("click");
    if(!username.value||!password.value) return msg.innerText="Bitte alles ausfÃ¼llen";
    localStorage.setItem("snusUser",username.value);
    showCasino(username.value);
}
function logout(){localStorage.clear();location.reload();}
function showCasino(u){
    loginBox.style.display="none";
    casinoPage.classList.remove("hidden");
    userText.innerText=u;
    balance=parseInt(localStorage.getItem("snusBalance"))||1000;
    updateBalance();
}
function updateBalance(){
    balanceText.innerText=balance;
    localStorage.setItem("snusBalance",balance);
}
function dailyBonus(){
    play("bonus");
    balance+=200;
    updateBalance();
    bonusMsg.innerText="ğŸ‰ +200 Chips!";
}

/* MENU */
function backToMenu(){
    blackjack.classList.add("hidden");
    roulette.classList.add("hidden");
    gameMenu.classList.remove("hidden");
}
function openBlackjack(){
    play("click");
    gameMenu.classList.add("hidden");
    blackjack.classList.remove("hidden");
    bet=0; betText.innerText=0;
}
function openRoulette(){
    play("click");
    gameMenu.classList.add("hidden");
    roulette.classList.remove("hidden");
    rouletteBet=0; rouletteBetText.innerText=0;
}

/* BLACKJACK */
/* ================= BLACKJACK (NEU & STABIL) ================= */

let bjBet = 0;
let bjPlayer = [];
let bjDealer = [];
let bjGameOver = false;

function setBet(amount){
    if(amount > balance) return;
    bjBet = amount;
    betText.innerText = amount;
}
function allIn(){
    if(balance <= 0) return;
    bjBet = balance;
    betText.innerText = bjBet;
}


function drawCard(){
    const suits = ["â™ ","â™¥","â™¦","â™£"];
    const values = ["A","2","3","4","5","6","7","8","9","10","J","Q","K"];
    return {
        value: values[Math.floor(Math.random()*values.length)],
        suit: suits[Math.floor(Math.random()*suits.length)]
    };
}

function calcHand(hand){
    let sum = 0;
    let aces = 0;

    hand.forEach(c=>{
        if(c.value === "A"){
            sum += 11;
            aces++;
        } else if(["J","Q","K"].includes(c.value)){
            sum += 10;
        } else {
            sum += Number(c.value);
        }
    });

    while(sum > 21 && aces > 0){
        sum -= 10;
        aces--;
    }
    return sum;
}

function newGame(){
    if(!bjBet) return;
    if(bjBet > balance) return;

    // ğŸ’° Einsatz sofort abziehen
    balance -= bjBet;
    updateBalance();

    result.innerText = "";

    bjPlayer = [drawCard(), drawCard()];
    bjDealer = [drawCard(), drawCard()];
    bjGameOver = false;

    renderBJ();
}


function hit(){
    if(bjGameOver) return;

    play("card");
    bjPlayer.push(drawCard());

    if(calcHand(bjPlayer) > 21){
        endBJ("âŒ Ãœberkauft â€“ Verloren", -bjBet);
    }

    renderBJ();
}

function stand(){
    if(bjGameOver) return;

    while(calcHand(bjDealer) < 17){
        bjDealer.push(drawCard());
    }

    const p = calcHand(bjPlayer);
    const d = calcHand(bjDealer);

    if(d > 21 || p > d){
        endBJ("âœ… Gewonnen", bjBet * 2);
    } else if(p === d){
        endBJ("â– Unentschieden", bjBet);
    } else {
        endBJ("âŒ Dealer gewinnt", 0);
    }

    renderBJ(true);
}


function endBJ(text, payout){
    bjGameOver = true;
    balance += payout;
    updateBalance();
    result.innerText = text;

    payout > 0 ? play("win") : play("lose");
}


function renderBJ(showDealer=false){
    playerCards.innerHTML = "";
    dealerCards.innerHTML = "";

    bjPlayer.forEach(c=>{
        const el = document.createElement("span");
        el.className = "card";
        el.innerText = c.value + c.suit;
        playerCards.appendChild(el);
    });

    bjDealer.forEach((c,i)=>{
        const el = document.createElement("span");
        el.className = "card";
        el.innerText = (!showDealer && i===0) ? "ğŸ‚ " : c.value + c.suit;
        dealerCards.appendChild(el);
    });

    playerSum.innerText = calcHand(bjPlayer);
    dealerSum.innerText = showDealer ? calcHand(bjDealer) : "?";
}


/* ROULETTE */
function setRouletteBet(a){if(a>balance)return;rouletteBet=a;rouletteBetText.innerText=a;}
function betColor(c){rouletteChoice=c;}
function spin() {
    if (!rouletteBet || rouletteChoice === null) {
        alert("Einsatz oder Farbe fehlt!");
        return;
    }

    play("card");

    const wheel = document.getElementById("rouletteWheel");
    const ball  = document.getElementById("rouletteBall");

    // ğŸ¯ ZufÃ¤llige Zahl auswÃ¤hlen
    const numberIndex = Math.floor(Math.random() * rouletteNumbers.length);
    const resultNumber = rouletteNumbers[numberIndex]; // Zahl + Farbe
    const color = resultNumber.color;

    // ğŸ¯ Winkel pro Feld
    const anglePerSlot = 360 / rouletteNumbers.length;

    // ğŸ¯ Zielwinkel: mehrere Runden + Index der Zahl
    const targetAngle = 360 * 6 + numberIndex * anglePerSlot + anglePerSlot / 2;

    // ğŸ¯ Setze CSS-Variable fÃ¼r Kugel
    ball.style.setProperty("--ball-rotation", `${targetAngle}deg`);

    // ğŸ¯ Reset Animation
    wheel.classList.remove("spin");
    ball.classList.remove("rolling");
    void wheel.offsetWidth; // Trick fÃ¼r Neustart

    // ğŸ¯ Animation starten
    wheel.classList.add("spin");
    ball.classList.add("rolling");

    // ğŸ¯ Ergebnis nach Animation
    setTimeout(() => {
        if (rouletteChoice === color) {
            balance += rouletteBet;
            play("win");
            rouletteResult.innerText = `ğŸ‰ ${resultNumber.n} (${color}) â€“ GEWONNEN`;
        } else {
            balance -= rouletteBet;
            play("lose");
            rouletteResult.innerText = `âŒ ${resultNumber.n} (${color}) â€“ VERLOREN`;
        }

        updateBalance();
        ball.classList.remove("rolling");

    }, 2500);
}





/* AUTO LOGIN */
window.onload=()=>{
    let u=localStorage.getItem("snusUser");
    if(u) showCasino(u);
};
</script>

</body>
</html>





